# 引号和转义

Bash 只有一种数据类型，就是字符串。不管用户输入什么数据，Bash 都认为这是字符串。所以，Bash 如何处理字符串是重点学习的内容。

## 转义

命令行参数可能包含特殊符号，比如`$`、`&`、`&`。如果想要使用它们的本来含义，而不是特殊含义，可以在它们前面使用反斜杠转义，使其变成普通字符。这就叫做“转义”（escape）。

```bash
$ echo \$date
$date
```

上面命令中，`$`是特殊字符，只有在前面加反斜杠，才能原样输出。

反斜杠本身也是特殊字符，如果想要使用它的本来含义，就需要对它转义，连续使用两个反斜线（`//`）。

```bash
$ echo \\
\
```

上面例子输出了反斜杠本身。

反斜杠除了用于转义，还可以表示一些不可打印的字符。

- `\a`：响铃
- `\b`：退格
- `\n`：换行
- `\r`：回车
- `\t`：制表符

如果想要在命令行使用这些不可打印的字符，可以把它们放在引号里面，然后使用`echo`命令的`-e`参数。

```bash
$ echo a\tb
atb

$ echo -e "a\tb"
a        b
```

## 单引号

单引号用于保留字符的字面含义，各种特殊字符都能在单引号里面变为普通字符，包括星号（`*`）、美元符号（`$`）、反斜杠（`\`）等。也就是说，单引号之中所有字符都会变成普通字符。

```bash
$ echo '*'
*

$ echo '$USER'
$USER

$ echo '$((2+2))'
$((2+2))

$ echo '$(echo foo)'
$(echo foo)
```

上面命令中，单引号使得 Bash 扩展、变量引用、算术运算和子命令，都失效了。

由于反斜杠在单引号里面会变成普通字符，所以如果单引号之中，还要使用单引号，需要在外层的单引号前面加上一个美元符号（`$`），然后再对里层的单引号转义。

```bash
# 不正确
$ echo 'it\'s'

# 正确
$ echo $'it\'s'
```

## 双引号

双引号可以保留大部分特殊字符的本来含义（比如`*`），但是美元符号`$`、反引号和反斜杠（`\`）除外。

```bash
$ echo "*"
*
```

上面例子中，通配符`*`放在双引号之中，就变成了普通字符，会原样输出。

```bash
$ echo "$SHELL"
/bin/bash

$ echo "`date`"
Mon Jan 27 13:33:18 CST 2020
```

上面例子中，美元符号和反引号在双引号中，都保持特殊含义。美元符号用来引用变量，反引号则是执行子命令。

```bash
$ echo "I'd say: \"hello!\""
I'd say: "hello!"

$ echo "\\"
\
```

上面例子中，反斜杠在双引号之中保持特殊含义，用来转义。可以使用反斜杠，在双引号之中插入双引号，以及插入反斜杠本身。

由于双引号将换行符解释为普通字符，所以可以利用双引号，在命令行输入多行文本。

```bash
$ echo "hello
> world"
hello
world
```

上面命令中，Bash 正常情况下会将换行符解释为命令结束，但是换行符在双引号之中就是普通字符，所以可以输入多行。`echo`命令会将换行符原样输出，显示的时候正常解释为换行。

如果文件名包含空格，就可以把它放在双引号之中。

```bash
$ ls "two words.txt"
```

上面命令中，`two words.txt`是一个包含空格的文件名，否则就会被 Bash 当作两个文件。

双引号会原样保存多余的空格。

```bash
$ echo "this is a     test"
this is a     test
```

双引号还有一个作用，就是保存原始命令的输出格式。

```bash
# 单行输出
$ echo $(cal)
一月 2020 日 一 二 三 四 五 六 1 2 3 ... 31

# 原始格式输出
$ echo "$(cal)"
      一月 2020
日 一 二 三 四 五 六
          1  2  3  4
 5  6  7  8  9 10 11
12 13 14 15 16 17 18
19 20 21 22 23 24 25
26 27 28 29 30 31
```

上面命令中，如果`$(cal)`不放在双引号之中，`echo`就会将所有结果以单行输出，丢弃了所有原始的格式。

## Here 字符串

Here 字符串是一种输入多行字符串的方法，格式如下。

```bash
[command] << token
字
符
串
内
容
token
```

它的格式分成开始标记和结束标记。开始标记是两个小于号 + Here 字符串的名称，名称可以随意取；结束标记是单独一行的 Here 字符串名称。两者之间就是多行字符串的内容。

下面是一个输出 HTML 代码的例子。

```bash
$ cat << _EOF_
<html>
<head>
    <title>
    The title of your page
    </title>
</head>

<body>
    Your page content goes here.
</body>
</html>
_EOF_
```

